<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ivry Town â€“ Ã‰nigme 2</title>
  <link rel="stylesheet" href="./assets.css"/>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="badge">ğŸ•µï¸</div>
        <div>
          <h1 data-title>Ivry Town</h1>
          <div class="sub" data-subtitle></div>
        </div>
      </div>
      <div style="text-align:right">
        <div class="pill" data-team>Ã‰quipe : â€”</div>
        <div class="steps" data-steps></div>
      </div>
    </header>

    
<main>
  <section class="card">
    <h2>Ã‰nigme 2 â€” La pizza codÃ©e</h2>
    <p>
      Le gang a envoyÃ© un message â€œen partsâ€.
      Associez chaque symbole Ã  un chiffre grÃ¢ce Ã  la feuille (ou en dÃ©duisant le motif),
      puis obtenez un <b>code Ã  3 chiffres</b>.
    </p>
    <div class="notice">
      <b>Mini-puzzle (site) :</b> additionnez les valeurs des 3 symboles ci-dessous (modulo 10) pour chaque chiffre.
      <br/><span class="muted">Exemple : ğŸ•=4, ğŸ§€=7, ğŸ¥¤=2 â†’ (4+7) mod 10 = 1</span>
    </div>
    <hr/>
    <div class="card" style="background:rgba(255,255,255,.03); border-radius:18px; border:1px solid rgba(255,255,255,.08)">
      <h2 style="margin-top:0">SÃ©quence</h2>
      <p style="font-size:22px; margin:8px 0">ğŸ• + ğŸ§€ â†’ 1er chiffre</p>
      <p style="font-size:22px; margin:8px 0">ğŸ¥¤ + ğŸ• â†’ 2e chiffre</p>
      <p style="font-size:22px; margin:8px 0">ğŸ§€ + ğŸ¥¤ â†’ 3e chiffre</p>
      <p class="muted" style="margin-top:10px">Vous pouvez changer cette Ã©nigme (ou ses valeurs) en Ã©ditant la feuille papier. Le site sert surtout Ã  valider.</p>
    </div>
    <hr/>
    <div class="row">
      <input id="ans" type="text" placeholder="Code Ã  3 chiffres (ex : 314)"/>
      <button id="check">Valider</button>
    </div>
    <p id="msg" class="notice" hidden></p>
  </section>

  <aside class="card">
    <h2>Notes de Dr Maxime</h2>
    <p>Â« Les Pizza Addicts aiment les codes courts. Trois chiffres suffisent pour un coffreâ€¦ Â»</p>
    <hr/>
    <button class="secondary" onclick="window.location.href='./enigme-1.html'">â†© Retour Ã©nigme 1</button>
  </aside>
</main>


    <div class="footer">
      Astuce orga : ouvrez ce dossier sur un tÃ©lÃ©phone par Ã©quipe (ou un PC sur une table).
      <span class="kbd">Reset</span> : <a href="#" onclick="hardReset();return false;">rÃ©initialiser cette Ã©quipe</a>.
    </div>
  </div>

<script src="./app.js"></script>
<script>
(async () => {
  const cfg = await loadConfig();
  renderHeader(cfg);
  
requireTeamOrRedirect();
const st0 = ensureState();
if(!st0.p1){ window.location.href = './enigme-1.html'; }

const msg = document.getElementById('msg');
const ans = document.getElementById('ans');
const btn = document.getElementById('check');

btn.addEventListener('click', async () => {
  const cfg = await loadConfig();
  const ok = (cfg.answers?.puzzle2 || []).map(normAnswer).includes(normAnswer(ans.value));
  if(ok){
    const st = ensureState();
    st.p2 = true;
    setState(st);
    showNotice(msg, 'good', "âœ… Code correct ! Le repaire est localisÃ©â€¦");
    setTimeout(()=> window.location.href = './final.html', 650);
  }else{
    showNotice(msg, 'bad', "âŒ Mauvais code. VÃ©rifiez vos symboles et le calcul (modulo 10).");
  }
});

})();
</script>
</body>
</html>
